{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}KGL Dashboard | Karibu Groceries{% endblock %}</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons CDN -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        /* Import Inter font (Tailwind default, but good to be explicit) */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f7f9; /* Light body background */
        }
        
        /* Custom styles for sidebar links for a nicer hover/active look */
        .sidebar-nav a:hover {
            background-color: #2b6cb0; /* Darker blue on hover */
        }
        .sidebar-nav a.active {
            background-color: #2c5282; /* Dark blue for active link */
            font-weight: 600;
            color: #fff;
        }

        /* Ensure smooth transition for main content when sidebar is hidden/shown (mainly for desktop) */
        #main-content {
            transition: margin-left 0.3s ease;
        }

        /* Mobile Overlay when sidebar is open */
        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 20;
        }
        .sidebar.translate-x-0 ~ .sidebar-overlay {
            display: block;
        }
    </style>
</head>

<body class="min-h-screen">

    <!-- Sidebar Toggle Button (Mobile Only) -->
    <button id="sidebar-toggle" class="md:hidden fixed top-4 left-4 z-40 p-2 bg-blue-600 text-white rounded-lg shadow-lg hover:bg-blue-700 transition duration-150">
        <i data-lucide="menu" class="w-6 h-6"></i>
    </button>

    <!-- Sidebar -->
    <div id="sidebar" class="sidebar fixed z-30 h-full w-64 bg-gray-800 text-white flex flex-col transition-transform duration-300 -translate-x-full md:translate-x-0 shadow-2xl">
        
        <!-- Header -->
        <div class="p-6 border-b border-gray-700">
            <h2 class="text-3xl font-extrabold text-blue-400 tracking-wider">KGL</h2>
            <p class="text-sm text-gray-400 mt-1">Inventory Management</p>
        </div>

        <!-- Navigation Links -->
        <nav class="sidebar-nav flex-1 p-4 space-y-2 overflow-y-auto">
            <!-- Note: I've replaced Font Awesome with Lucide icons as used in your example -->
            
            <!-- Dashboard Link (Example Active State) -->
            <a href="{% url 'manager' %}" class="active flex items-center space-x-3 p-3 rounded-xl text-gray-200 transition duration-150">
                <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
                <span>Dashboard</span>
            </a>
            
            <a href="{% url 'allsales' %}" class="flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-700 text-gray-200 transition duration-150">
                <i data-lucide="bar-chart-3" class="w-5 h-5"></i>
                <span>All Sales</span>
            </a>
            
            <a href="{% url 'allstock' %}" class="flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-700 text-gray-200 transition duration-150">
                <i data-lucide="package" class="w-5 h-5"></i>
                <span>All Stock</span>
            </a>
            
            <a href="{% url 'receipt' %}" class="flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-700 text-gray-200 transition duration-150">
                <i data-lucide="receipt" class="w-5 h-5"></i>
                <span>Receipts</span>
            </a>
            
            <a href="{% url 'addcredit' %}" class="flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-700 text-gray-200 transition duration-150">
                <i data-lucide="credit-card" class="w-5 h-5"></i>
                <span>All Credit</span>
            </a>
        </nav>

        <!-- Logout Link -->
        <div class="p-4 border-t border-gray-700">
            <a href="{% url 'logout' %}" class="flex items-center justify-center space-x-3 p-3 rounded-xl bg-red-600 text-white font-semibold hover:bg-red-700 transition duration-150">
                <i data-lucide="log-out" class="w-5 h-5"></i>
                <span>Logout</span>
            </a>
        </div>
    </div>
    
    <!-- Mobile Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebar-overlay"></div>

    <!-- Main Content Area -->
    <div id="main-content" class="md:ml-40 w-full flex flex-col min-h-screen">

        <!-- Main Header -->
        <header class="bg-white p-4 md:p-6 shadow-md">
            <div class="flex items-center justify-between container mx-auto">
                <h1 class="text-xl md:text-2xl font-bold text-gray-800">{% block page_title %}Dashboard Overview{% endblock %}</h1>
                <!-- Username is moved here from the previous example content -->
                <small class="text-gray-600 hidden sm:block">Welcome, {{ user.username|default:"Guest" }}</small>
            </div>
        </header>

        <!-- Content Wrapper -->
        <div class="flex-grow p-4 md:p-6 container mx-auto">
            {% block content %}
            <!-- Page content will be injected here -->
            {% endblock %}
        </div>

        <!-- Footer -->
        <footer class="bg-gray-800 text-gray-400 text-center py-3 text-sm mt-auto">
            &copy; 2025 Karibu Groceries Ltd. All rights reserved.
        </footer>
    </div>

    <script>
        // Initialize Lucide Icons
        lucide.createIcons();
        
        const sidebar = document.getElementById('sidebar');
        const toggleBtn = document.getElementById('sidebar-toggle');
        const overlay = document.getElementById('sidebar-overlay');

        // Toggle sidebar on mobile
        toggleBtn.addEventListener('click', () => {
            sidebar.classList.toggle('-translate-x-full');
            // Toggle overlay for mobile view
            overlay.style.display = sidebar.classList.contains('-translate-x-full') ? 'none' : 'block';
        });

        // Close sidebar when clicking overlay
        overlay.addEventListener('click', () => {
            sidebar.classList.add('-translate-x-full');
            overlay.style.display = 'none';
        });
    </script>
</body>
</html>
